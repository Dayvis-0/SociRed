<div class="forgot-password-container">
  <div class="forgot-password-box">
    <div class="logo"></div>
    <h2>驴Olvidaste tu contrase帽a?</h2>
    
    <!-- Mostrar solo cuando NO se ha enviado el correo -->
    <p class="subtitle" *ngIf="!emailSent">
      Ingresa tu correo electr贸nico y te enviaremos un enlace para recuperar tu cuenta.
    </p>

    <form [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()" *ngIf="!emailSent">
      
      <!-- ERROR MESSAGE -->
      <div class="alert alert-error" *ngIf="errorMessage">
        {{ errorMessage }}
      </div>

      <!-- Email Input -->
      <input 
        type="email" 
        class="input-field"
        formControlName="email"
        placeholder="Correo electr贸nico"
        [class.error]="email?.invalid && email?.touched"
        [disabled]="!!(loading$ | async)"
      >
      <div class="error-message" *ngIf="email?.invalid && email?.touched">
        <span *ngIf="email?.errors?.['required']">El correo es obligatorio</span>
        <span *ngIf="email?.errors?.['email']">Ingresa un correo v谩lido</span>
      </div>

      <!-- Submit Button -->
      <button 
        type="submit" 
        class="submit-btn"
        [disabled]="forgotPasswordForm.invalid || !!(loading$ | async)"
      >
        <span *ngIf="!(loading$ | async)">Enviar enlace</span>
        <span *ngIf="loading$ | async">Enviando...</span>
      </button>

      <!-- Back to Login -->
      <div class="back-to-login">
        <a href="javascript:void(0)" (click)="onBackToLogin()">Volver a inicio de sesi贸n</a>
      </div>
    </form>

    <!-- Mostrar solo cuando SE HA ENVIADO el correo -->
    <div *ngIf="emailSent">
      <div class="alert alert-success">
        {{ successMessage }}
      </div>
      
      <div class="back-to-login">
        <a href="javascript:void(0)" (click)="onBackToLogin()">Volver a inicio de sesi贸n</a>
      </div>
    </div>
  </div>

  <!-- FOOTER -->
  <app-auth-footer></app-auth-footer>
</div>