<app-navbar></app-navbar>

<div class="container">
  <app-sidebar-left></app-sidebar-left>

  <main class="feed">
    <!-- CREATE POST -->
    <div class="create-post">
      <div class="create-post-input" (click)="openCreatePostModal()">
        <div class="create-post-avatar">{{ currentUserInitials }}</div>
        <input 
          type="text" 
          class="create-post-field" 
          [placeholder]="placeholderText"
          readonly
        >
      </div>
    </div>

    <!-- POSTS -->
    <article *ngFor="let post of posts" class="post">
      <div class="post-header">
        <div class="post-avatar" [ngClass]="post.avatarClass">
          {{ post.initials }}
        </div>
        <div class="post-info">
          <div class="post-author">{{ post.author }}</div>
          <div class="post-time">{{ post.time }}</div>
        </div>
        <div class="post-menu" (click)="onEdit(post)">⋯</div>
      </div>

      <div class="post-content">{{ post.content }}</div>

      <div *ngIf="post.hasImage" class="post-image">
        {{ post.imageEmoji }}
      </div>

      <div class="post-actions">
        <app-like-button
          [liked]="post.liked"
          [likesCount]="post.likes"
          [showCount]="false"
          (likeToggle)="toggleLike(post)"
        ></app-like-button>
        <button class="post-action" (click)="onEdit(post)">
          <span>✏️</span>
          <span>Editar</span>
        </button>
      </div>

      <!-- COMMENT SECTION -->
      <app-comment-section 
        [postId]="post.id" 
        [commentsCount]="post.comments"
      ></app-comment-section>
    </article>

  </main>

  <app-sidebar-right></app-sidebar-right>
</div>

<!-- CREATE POST MODAL -->
<app-create-post-modal (publishPost)="onPublishPost($event)"></app-create-post-modal>