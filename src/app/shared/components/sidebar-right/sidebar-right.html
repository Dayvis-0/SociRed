<aside class="sidebar-right">
  <!-- PROFILE CARD -->
  <div class="profile-card">
    <div 
      class="profile-avatar"
      [style.background-image]="userPhotoURL ? 'url(' + userPhotoURL + ')' : 'none'"
    >
      <span *ngIf="!userPhotoURL">{{ userInitials || '??' }}</span>
    </div>
    <a routerLink="/profile" class="profile-name">{{ userName || 'Usuario' }}</a>
    <div class="profile-bio">{{ userBio || 'Sin biograf√≠a' }}</div>
    <div class="profile-stats">
      <a routerLink="/friends" class="profile-stat">
        <div class="profile-stat-value">{{ friendsCount }}</div>
        <div class="profile-stat-label">Amigos</div>
      </a>
      <a routerLink="/profile" class="profile-stat">
        <div class="profile-stat-value">{{ postsCount }}</div>
        <div class="profile-stat-label">Publicaciones</div>
      </a>
    </div>
  </div>

  <!-- ONLINE FRIENDS CARD -->
  <div class="suggestions-card">
    <div class="suggestions-title">
      {{ friends.length > 0 ? 'Amigos Conectados' : 'Cargando...' }}
    </div>
    
    <!-- Loading State -->
    <div *ngIf="loadingFriends" class="loading-state">
      <div class="mini-spinner"></div>
      <p>Cargando amigos...</p>
    </div>

    <!-- Online Friends List -->
    <div *ngIf="!loadingFriends && friends.length > 0">
      <a 
        *ngFor="let friend of friends" 
        [routerLink]="['/profile', friend.userId]"
        class="suggestion-item"
      >
        <div class="suggestion-avatar-wrapper">
          <div 
            class="suggestion-avatar"
            [style.background]="friend.photoURL ? 'none' : friend.gradient"
            [style.background-image]="friend.photoURL ? 'url(' + friend.photoURL + ')' : 'none'"
          >
            <span *ngIf="!friend.photoURL">{{ friend.initials }}</span>
          </div>
          <!-- üü¢ INDICADOR ONLINE -->
          <span class="online-indicator" *ngIf="friend.isOnline"></span>
        </div>
        <div class="suggestion-info">
          <div class="suggestion-name">{{ friend.name }}</div>
          <div class="suggestion-mutual online-text">‚óè Conectado</div>
        </div>
      </a>
    </div>

    <!-- Empty State -->
    <div *ngIf="!loadingFriends && friends.length === 0" class="empty-online">
      <p>üí§</p>
      <span>Ning√∫n amigo conectado</span>
      <a routerLink="/friends" class="add-friends-link">Ver todos los amigos</a>
    </div>
  </div>
</aside>